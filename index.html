<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>DDIY Automation</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
<link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/alyssaxuu/flowy/flowy.min.css'><link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div id="navigation">
  <div id="leftside">
    <div id="details">
      <div id="back"><img src="assets/arrow.svg"></div>
      <div id="names">
        <p id="title">Your automated workflow</p>
        <p id="subtitle">Project name</p>
      </div>
    </div>
  </div>
  <div id="centerswitch">
    <div id="leftswitch">Diagram view</div>
    <div id="rightswitch">Code editor</div>
  </div>
  <div id="buttonsright">
    <div id="discard">Discard</div>
    <div id="publish">Publish</div>
  </div>
</div>
<div id="leftcard">
  <div id="closecard">
    <img src="assets/closeleft.svg">
  </div>
  <p id="header">Blocks</p>
  <div id="search">
    <img src="assets/search.svg">
    <input type="text" placeholder="Search blocks">
  </div>
  <div id="subnav">
    <div id="triggers" class="navactive side">Triggers</div>
    <div id="actions" class="navdisabled side">Actions</div>
    <div id="loggers" class="navdisabled side">Loggers</div>
  </div>
  <div id="blocklist">
    <div class="blockelem create-flowy noselect">
      <input type="hidden" name='blockelemtype' class="blockelemtype" value="1">
      <div class="grabme">
        <img src="assets/grabme.svg">
      </div>
      <div class="blockin">
        <div class="blockico">
          <span></span>
          <img src="assets/eye.svg">
        </div>
        <div class="blocktext">
          <p class="blocktitle">New visitor</p>
          <p class="blockdesc">Triggers when somebody visits a specified page</p>
        </div>
      </div>
    </div>
    <div class="blockelem create-flowy noselect">
      <input type="hidden" name='blockelemtype' class="blockelemtype" value="2">
      <div class="grabme">
        <img src="assets/grabme.svg">
      </div>
      <div class="blockin">
        <div class="blockico">
          <span></span>
          <img src="assets/action.svg">
        </div>
        <div class="blocktext">
          <p class="blocktitle">Action is performed</p>
          <p class="blockdesc">Triggers when somebody performs a specified action</p>
        </div>
      </div>
    </div>
    <div class="blockelem create-flowy noselect">
      <input type="hidden" name='blockelemtype' class="blockelemtype" value="3">
      <div class="grabme">
        <img src="assets/grabme.svg">
      </div>
      <div class="blockin">
        <div class="blockico">
          <span></span>
          <img src="assets/time.svg">
        </div>
        <div class="blocktext">
          <p class="blocktitle">Time has passed</p>
          <p class="blockdesc">Triggers after a specified amount of time</p>
        </div>
      </div>
    </div>
    <div class="blockelem create-flowy noselect">
      <input type="hidden" name='blockelemtype' class="blockelemtype" value="4">
      <div class="grabme">
        <img src="assets/grabme.svg">
      </div>
      <div class="blockin">
        <div class="blockico">
          <span></span>
          <img src="assets/error.svg">
        </div>
        <div class="blocktext">
          <p class="blocktitle">Error prompt</p>
          <p class="blockdesc">Triggers when a specified error happens</p>
        </div>
      </div>
    </div>
  </div>
  
</div>
<div id="propwrap">
  <div id="properties">
    <div id="close">
      <img src="assets/close.svg">
    </div>
    <p id="header2">Properties</p>
    <div id="propswitch">
      <div id="dataprop">Data</div>
      <div id="alertprop">Alerts</div>
      <div id="logsprop">Logs</div>
    </div>
    <div id="proplist">
      <p class="inputlabel">Select database</p>
      <div class="dropme">Database 1 <img src="assets/dropdown.svg"></div>
      <p class="inputlabel">Check properties</p>
      <div class="dropme">All<img src="assets/dropdown.svg"></div>
      <div class="checkus"><img src="assets/checkon.svg">
        <p>Log on successful performance</p>
      </div>
      <div class="checkus"><img src="assets/checkoff.svg">
        <p>Give priority to this block</p>
      </div>
    </div>
    <div id="divisionthing"></div>
    <div id="removeblock">Delete blocks</div>
  </div>
</div>

<div id="canvas">
</div>
<!-- partial -->
  <script src='https://cdn.jsdelivr.net/gh/alyssaxuu/flowy/flowy.min.js'></script><script  src="./script.js"></script>
<script>
//Hide sidebar button
var closecard = document.getElementById('closecard');
var leftcard = document.getElementById('leftcard');
var leftcardWidth = leftcard.offsetWidth;
closecard.addEventListener('click', function() {
var leftcard = document.getElementById('leftcard');
var leftcardWidth = leftcard.offsetWidth;
var leftcardLeft = leftcard.offsetLeft;
if (leftcardLeft < 0) {
  leftcard.style.left = '0px';
  closecard.getElementsByTagName('img')[0].src = 'assets/closeleft.svg';
} else {
  leftcard.style.left = '-' + leftcardWidth + 'px';
  closecard.getElementsByTagName('img')[0].src = 'assets/closeright.svg';}
});
//search functionality
var search = document.getElementById('search');
var searchInput = search.getElementsByTagName('input')[0];
var blocktitles = document.getElementsByClassName('blocktitle');
var triggers = document.getElementById('triggers');
var actions = document.getElementById('actions');
var loggers = document.getElementById('loggers');
search.addEventListener('keyup', function() {
  if (searchInput.value.length > 2) {
    for (var i = 0; i < blocktitles.length; i++) {
      var blocktitle = blocktitles[i];
      var parent = blocktitle.parentNode;
      var parent = parent.parentNode;
      var parent = parent.parentNode;
      if (blocktitle.innerHTML.toLowerCase().indexOf(searchInput.value.toLowerCase()) > -1) {
        parent.style.display = 'block';
      } else {
      parent.style.display = 'none';
    }
  }
} else {
  for (var i = 0; i < blocktitles.length; i++) {
    var blocktitle = blocktitles[i];
    var parent = blocktitle.parentNode;
    var parent = parent.parentNode;
    var parent = parent.parentNode;
    parent.style.display = 'block';
  }
}
});
triggers.addEventListener('click', function() {
  searchInput.value = '';
});
actions.addEventListener('click', function() {
  searchInput.value = '';
});
loggers.addEventListener('click', function() {
  searchInput.value = '';
});
//add shaddow to blocks
var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    for (var i = 0; i < mutation.addedNodes.length; i++) {
		var blocks = document.getElementsByClassName('blockelem noselect block');
		for (var i = 0; i < blocks.length; i++) {
		blocks[i].style.boxShadow = '0 0 5px #888';
		}
    }
  });
});
observer.observe(document.body, { childList: true });
//mouse pointer
var dataprop = document.getElementById('dataprop');
var alertprop = document.getElementById('alertprop');
var logsprop = document.getElementById('logsprop');
dataprop.addEventListener('mouseover', function() {
  dataprop.style.cursor = 'pointer';
});
alertprop.addEventListener('mouseover', function() {
  alertprop.style.cursor = 'pointer';
});
logsprop.addEventListener('mouseover', function() {
  logsprop.style.cursor = 'pointer';
});
</script>
</body>
</html>
